<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yayasan Anggur Sejahtera - POST</title>

    <!-- Styling CSS -->
    <link href="../src/output.css" rel="stylesheet">

    <!-- JavaScript -->
    <script src="../src/script.js" defer></script>

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/f91ffb7c10.js" crossorigin="anonymous"></script>

    <!-- Swiper -->
    <link rel="stylesheet" href="../src/swiper-bundle.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Font Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
</head>
<body class="text-green-900">
    <header class="bg-white bg-opacity-80 backdrop-blur flex p-1 py-1 px-4 md:py-0 md:p-0 md:px-4 items-center justify-between fixed top-0 left-0 w-full z-30 shadow-md">
        <a href="index.html"><img src="../src/gallery/yasi-logo.png" alt="image not found" class=" w-20 md:w-[70px] xl:w-20 xl:py-1 items-center justify-center md:mr-3 xl:mr-1 rounded-md"></a>
        <nav class="hidden md:flex gap-1">
            <a class="text-zinc-800 text-base xl:text-lg hover:text-green-900 hover:bg-gray-200 border-opacity-80 border-white hover:border-opacity-100 py-5 px-2 transition-all ease-in-out duration-200 border-b-2 hover:border-green-900" href="index.html">HOME</a>
            <a class="text-zinc-800 text-base xl:text-lg hover:text-green-900 hover:bg-gray-200 border-opacity-80 border-white hover:border-opacity-100 py-5 px-2 transition-all ease-in-out duration-200 border-b-2 hover:border-green-900" href="about.html">TENTANG KAMI</a>
            <a class="text-zinc-800 text-base xl:text-lg hover:text-green-900 hover:bg-gray-200 border-opacity-80 border-white hover:border-opacity-100 py-5 px-2 transition-all ease-in-out duration-200 border-b-2 hover:border-green-900" href="program.html">PROGRAM</a>
            <a class="text-zinc-800 text-base xl:text-lg hover:text-green-900 hover:bg-gray-200 border-opacity-80 border-white hover:border-opacity-100 py-5 px-2 transition-all ease-in-out duration-200 border-b-2 hover:border-green-900" href="article.html">TERBARU</a>
            <a class="text-zinc-800 text-base xl:text-lg hover:text-green-900 hover:bg-gray-200 border-opacity-80 border-white hover:border-opacity-100 py-5 px-2 transition-all ease-in-out duration-200 border-b-2 hover:border-green-900" href="contact.html">KONTAK</a>
        </nav>
        <div class="hidden md:flex gap-2">
            <a href="http://www.youtube.com/@dineugarden8711"><i class="fa-brands fa-youtube fa-xl py-5 px-[7px] rounded-full bg-zinc-300 hover:bg-red-500 hover:text-white shadow-lg transition ease-in-out duration-300"></i></a>
            <a href="https://www.instagram.com/dineugarden?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><i class="instagram fa-brands fa-instagram fa-xl bg-zinc-300 py-5 px-2.5 rounded-full hover:text-white shadow-lg transition ease-in-out duration-300"></i></a>
        </div>
        <!-- Hamburger Menu -->
        <button id="hamburger" name="hamburger" type="button" class="block absolute right-4 md:hidden ">
            <span class="hamburger-line transition duration-300 ease-in-out"></span>
            <span class="hamburger-line transition duration-300 ease-in-out"></span>
            <span class="hamburger-line transition duration-300 ease-in-out"></span>
        </button>
        <!-- Dropdown Menu -->
        <div id="mobile-menu" class="hidden absolute top-full right-2 shadow-xl">
            <nav class="flex flex-col bg-zinc-800 bg-opacity-85 rounded-sm border-2 border-green-900">
                <a class="text-lg text-zinc-200 hover:bg-gray-200 hover:text-green-900 transition ease-in-out duration-200 p-6 px-12 pr-52" href="index.html">HOME</a>
                <a class="text-lg text-zinc-200 hover:bg-gray-200 hover:text-green-900 transition ease-in-out duration-200 p-6 px-12 pr-52" href="about.html">TENTANG </a>
                <a class="text-lg text-zinc-200 hover:bg-gray-200 hover:text-green-900 transition ease-in-out duration-200 p-6 px-12 pr-52" href="program.html">PROGRAM</a>
                <a class="text-lg text-zinc-200 hover:bg-gray-200 hover:text-green-900 transition ease-in-out duration-200 p-6 px-12 pr-52" href="article.html">TERBARU</a>
                <a class="text-lg text-zinc-200 hover:bg-gray-200 hover:text-green-900 transition ease-in-out duration-200 p-6 px-12 pr-52" href="contact.html">KONTAK</a>
            </nav>
        </div>
    </header>

    <div class="bg-zinc-200 py-20 text-green-900">
        <div class="flex flex-col gap-8" id="articles">
            <h1 class="text-center text-lg md:text-xl lg:text-2xl"><b>BERITA</b></h1>
        </div>    
    </div>

    <footer class="bg-zinc-800 flex flex-col px-4 md:justify-center text-zinc-200">
        <div class="flex py-4 justify-center gap-4 border-b-2 border-zinc-200 w-1/2 md:w-1/3 mx-auto items-center">
            <a href="http://www.youtube.com/@dineugarden8711"><i class="fa-brands fa-youtube fa-xl"></i></a>
            <a href="https://wa.me/628112343011"><i class="fa-brands fa-whatsapp fa-xl"></i></a>
            <a href="https://www.instagram.com/dineugarden?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><i class="fa-brands fa-instagram fa-xl"></i></a>
            <a href="mailto:salmanfird4@outlook.com"><i class="fa-regular fa-envelope fa-xl"></i></a>
            <a href="https://www.facebook.com/profile.php?id=100082753752459"><i class="fa-brands fa-facebook fa-lg"></i></a>
        </div>
        <div class="flex mb-2 mt-4 justify-center">
            <p class="text-zinc-200 text-center text-sm md:text-base lg:text-lg">Jl. Bougenvile Blok H No.4 Antapani, Bandung, Jawa Barat 40291</p>
        </div>
        <div class="flex flex-col md:flex-row px-4 md:items-center md:justify-center md:gap-4 mb-4">
            <div class="flex py-2 justify-center">
                <div class="flex flex-row justify-center gap-6 bg-white p-4 md:p-2 rounded-sm"> 
                    <img src="../src/gallery/sbai-logo.png" class="max-h-20 justify-center" alt="">
                    <img src="../src/gallery/yasi-logo.png" class="max-h-20 justify-center" alt="">
                    <img src="../src/gallery/dngn-logo.png" class="max-h-20 justify-center" alt="">
                </div>
            </div>
            <div class="flex flex-col py-4 gap-2 md:w-1/4">
                <h1 class="text-zinc-200 text-center md:text-right text-sm lg:text-base 2xl:text-lg"><b>YAYASAN ANGGUR SEJHATERA INDONESIA</b></h1>
                <p class=" text-zinc-200 text-center md:text-right text-sm xl:text-base">&copy; 2024 Yayasan Anggur Sejahtera. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Fetch articles from the server
        fetch('/api/articles')
            .then(response => response.json())
            .then(articles => {
            const articlesDiv = document.getElementById('articles');
            articles.reverse().forEach(article => {
                const articleElement = document.createElement('div');
                articleElement.innerHTML = `
                    <div class="bg-white p-4 w-5/6 mx-auto text-green-900 rounded-sm flex flex-col gap-2" id="articleContent">
                        <h1 class="text-lg text-center"><b>${article.title}</b></h1>
                        <div class="border-b-2 flex justify-between px-4">
                            <h2 class="flex gap-2 items-center justify-center"><i class="fa-solid fa-user fa-sm"></i>${article.author}</h2>
                            <p>${new Date(article.uploadDate).toLocaleDateString()}</p>
                        </div>
                        <p class="text-justify">${article.content}</p>
                    </div>
                `;
                
                // Create the points list
                const articlePoints = document.createElement('ul');
                
                // Add article points (1 to 3)
                for (let i = 1; i < 4; i++) {
                    const key = `point_${i}`; // Use correct dynamic key
                    if (article[key]) {
                        const point = document.createElement('li');
                        point.textContent = article[key]; 
                        articlePoints.appendChild(point);
                    }
                }
            
                // Handle point 4 separately since it contains a link
                if (article.point_4) {
                    const point = document.createElement('li');
                    point.innerHTML = `Link: <a class="text-purple-800" href="${article.point_4}" target="_blank">${article.point_4}</a>`;
                    articlePoints.appendChild(point);
                }
            
                // Reference the articleContent div within the articleElement
                const content = articleElement.querySelector('#articleContent');
            
                // Append the points list to the articleContent div
                content.appendChild(articlePoints);
                
                // Finally, append the article element to the main articles div
                articlesDiv.appendChild(articleElement);
            });
        })
        .catch(error => console.error('Error fetching articles:', error));
    </script>
</body>
</html>